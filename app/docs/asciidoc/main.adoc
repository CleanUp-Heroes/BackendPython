= Backend APP

== CleanUp Heroes
Adjedomole, Barry, Rahim

== Description de l'application
Ce site a pour ambition de sensibiliser les citoyens au tri s√©lectif et au respect de l‚Äôenvironnement tout en les encourageant √† agir activement pour am√©liorer leur cadre de vie. Les utilisateurs peuvent participer √† des **challenges environnementaux** qui leur permettent de gagner des points en r√©alisant des actions concr√®tes, telles que le tri des d√©chets ou la participation √† des initiatives locales. Ces points accumul√©s pourront, √† l‚Äôavenir, √™tre √©chang√©s contre des r√©compenses concr√®tes, renfor√ßant ainsi leur motivation √† s‚Äôimpliquer durablement.

En parall√®le, le site offre une fonctionnalit√© cl√© : le **signalement de d√©chets abandonn√©s** dans les espaces publics. Ces signalements sont actuellement affich√©s sous forme de liste, mais une √©volution future pr√©voit l‚Äôint√©gration d‚Äôune carte interactive. Chaque signalement sera repr√©sent√© par un marqueur g√©olocalis√©, offrant une vue claire des zones concern√©es. Une fois un d√©chet ramass√©, son marqueur pourra √™tre retir√© de la carte pour refl√©ter la propret√© retrouv√©e de l‚Äôespace. Cette fonctionnalit√© vise √† am√©liorer la coordination entre citoyens et services responsables, tout en fournissant un outil visuel pour mesurer les progr√®s r√©alis√©s.

Le site mettra √©galement en avant des **classements mondiaux et locaux**, permettant aux utilisateurs de comparer leurs contributions avec celles des autres. Ces classements encourageront une saine comp√©tition et renforceront le sentiment de communaut√© autour de la cause environnementale.

== Objectif de l'application
L‚Äôobjectif global de ce projet est de promouvoir des comportements responsables, tels que le tri s√©lectif et la collecte des d√©chets, tout en r√©compensant l‚Äôengagement des utilisateurs. En combinant des √©l√©ments ludiques comme les challenges et les classements, des outils pratiques comme la carte interactive, et des perspectives d‚Äôavenir avec des r√©compenses concr√®tes, ce site ambitionne de devenir une plateforme incontournable pour tous ceux qui souhaitent agir pour l‚Äôenvironnement.

== Tableau comparatif des solutions existantes

[cols="1,2,2", options="header"]
|===
| **Solution**   | **Avantages** | **Limites**
| **Litterati**   | - Encourage un nettoyage collaboratif.+
- Implique activement les utilisateurs dans la g√©olocalisation des d√©chets. | - D√©pend de l‚Äôimplication des utilisateurs.+
- Difficult√© √† s‚Äô√©tendre dans les zones rurales.
| **Recyclebank** | - R√©compenses attractives (r√©ductions locales). +
- Incite au recyclage continu. | - Limit√© aux zones partenaires. +
- Offre de r√©compenses restreinte.
| **TrashOut**    | - Permet de signaler et cartographier les d√©chets. +
- Facilite une gestion collective. | - D√©pend des signalements des utilisateurs (informations parfois inexactes). +
- Syst√®me d√©centralis√©.
| **Tidy Towns**  | - Encourage la participation communautaire par des r√©compenses. +
- Focalis√© sur l‚Äôembellissement des villes. | - N√©cessite une bonne organisation d‚Äô√©v√©nements. +
- Implique fortement les communaut√©s locales.
| **EcoHero**     | - Dimension ludique avec des d√©fis et r√©compenses. +
- Encourage des comportements durables. | - Manque d‚Äôadaptation aux sp√©cificit√©s locales. +
- N√©cessite un engagement constant des utilisateurs.
|===

== Avantages suppl√©mentaires de **CleanUp Heroes**

**CleanUp Heroes** apporte des innovations et fonctionnalit√©s suppl√©mentaires par rapport aux solutions existantes :

. **Fonctionnalit√©s int√©gr√©es et compl√©mentaires** :
   * **Signalements cartographi√©s** : Les utilisateurs peuvent signaler des d√©chets g√©olocalis√©s via une carte interactive, qui √©volue en temps r√©el. Les signalements peuvent √™tre retir√©s une fois les d√©chets ramass√©s.
   * **Classements dynamiques** : Un classement mondial et local permet de motiver les utilisateurs en favorisant une saine comp√©tition.
   * **R√©compenses concr√®tes** : Les utilisateurs peuvent gagner des avantages aupr√®s de commer√ßants locaux en atteignant des objectifs sp√©cifiques, renfor√ßant leur motivation.

. **Impact visible et mesurable** :
   L'application propose une estimation chiffr√©e de l‚Äôimpact positif des actions des utilisateurs (par exemple, quantit√© de d√©chets collect√©s, CO2 √©conomis√©), renfor√ßant leur sentiment d'accomplissement et d‚Äôutilit√©.

. **Engagement communautaire renforc√©** :
   En liant les d√©fis individuels et communautaires, l'application cr√©e une synergie entre citoyens, entreprises locales et collectivit√©s, encourageant une participation active √† grande √©chelle.

. **Conception ludique et motivante** :
   Gr√¢ce √† l'int√©gration d'√©l√©ments ludiques comme les d√©fis et les r√©compenses, CleanUp Heroes s‚Äôassure de maintenir un haut niveau d‚Äôengagement des utilisateurs.


== Architecture de l'application

image::images/architecture_projet.png[architecture de l'application, width=500, align=center]

== Features

== Feature 2

== Formulaire de signalement

=== Objectif
Le formulaire de signalement permet √† un utilisateur de signaler un probl√®me ou une situation n√©cessitant une intervention. Ce formulaire collectera les informations essentielles li√©es au signalement et permettra de cr√©er une nouvelle entr√©e dans le syst√®me.

=== Comportement

==== Collecte des donn√©es
Le formulaire demande √† l'utilisateur de remplir plusieurs champs :

* *Description du probl√®me* : Un champ texte o√π l'utilisateur peut d√©crire le probl√®me rencontr√©.
* *Lieu* : O√π se trouve le probl√®me (par exemple, une adresse ou des coordonn√©es g√©ographiques).
* *Photo (facultatif)* : L'utilisateur peut ajouter une photo pour illustrer le probl√®me.
* *Type de probl√®me* : S√©lectionner un type de probl√®me parmi une liste pr√©d√©finie (par exemple, d√©chet, panne, etc.).
* *Date/Heure* : La date et l'heure du signalement sont automatiquement ajout√©es pour chaque nouvelle entr√©e.

==== Validation et envoi

* Une fois les informations remplies, l'utilisateur peut soumettre le formulaire.
* Les donn√©es sont envoy√©es √† un backend via une requ√™te API pour √™tre enregistr√©es dans une base de donn√©es.

=== Fonctionnement d√©taill√© du formulaire

* Lors de la soumission du formulaire, une requ√™te POST est envoy√©e au backend pour cr√©er un nouveau signalement avec les donn√©es saisies.
* Si l'utilisateur a omis un champ requis ou fait une erreur, des messages d'erreur ou des validations peuvent √™tre affich√©s.
* Apr√®s une soumission r√©ussie, l'utilisateur peut √™tre redirig√© vers la liste des signalements ou voir un message de confirmation.

=== Exemple d'interaction avec le formulaire

1. L'utilisateur remplit le formulaire avec la description du probl√®me et le lieu.
2. Il peut √©galement joindre une photo.
3. Une fois le formulaire soumis, le signalement est ajout√© √† la base de donn√©es et l'utilisateur re√ßoit un message de confirmation.

== Liste des signalements

=== Objectif
La liste des signalements affiche toutes les demandes ou probl√®mes signal√©s par les utilisateurs. Elle permet de suivre l'√©tat de chaque signalement et d‚Äôeffectuer des actions dessus, comme marquer un signalement comme "r√©solu" ou "en cours".

=== Comportement

==== Affichage des signalements

* Une liste de signalements est r√©cup√©r√©e depuis le backend (via une requ√™te GET).
* Chaque signalement affichera des informations essentielles, telles que :
  ** La description du probl√®me
  ** Le statut (ouvert ou ferm√©)
  ** La date du signalement
  ** Le type de probl√®me
  ** Une photo (si disponible)

==== Statut du signalement

* Chaque signalement peut avoir un statut qui indique s'il a √©t√© trait√© ou non :
  ** *Ouvert* : Le signalement n‚Äôa pas encore √©t√© r√©solu.
  ** *Ferm√©* : Le signalement a √©t√© r√©solu ou pris en charge.
* Un bouton est affich√© √† c√¥t√© de chaque signalement pour permettre √† l'utilisateur de changer son statut (de "ouvert" √† "ferm√©").

==== Actions disponibles

* Un utilisateur peut interagir avec chaque signalement en cliquant sur un bouton pour mettre √† jour son statut (fermer le signalement si celui-ci est trait√©).
* Cette action envoie une requ√™te API PUT pour modifier le statut du signalement dans la base de donn√©es.

==== Filtrage et tri des signalements

* Les signalements peuvent √™tre filtr√©s par statut, type de probl√®me, ou date.
* L‚Äôutilisateur peut aussi trier les signalements en fonction de diff√©rents crit√®res (par exemple, par date, par type, etc.).

=== Fonctionnement d√©taill√© de la liste des signalements

* Lors de la connexion de l'utilisateur ou de la page de gestion des signalements, une requ√™te GET est envoy√©e au backend pour r√©cup√©rer tous les signalements.
* Chaque signalement est affich√© sous forme de carte ou de ligne dans un tableau, avec un bouton pour changer son statut.
* Lorsqu‚Äôun utilisateur modifie un signalement (en le marquant comme "ferm√©"), une requ√™te PUT est envoy√©e pour mettre √† jour l'√©tat du signalement dans la base de donn√©es.
* Une fois le statut modifi√©, l'interface se met √† jour pour refl√©ter cette modification.

=== Exemple d'interaction avec la liste des signalements

1. L'utilisateur voit la liste des signalements avec un bouton "Fermer" √† c√¥t√© de chaque signalement ouvert.
2. Il clique sur le bouton "Fermer" pour marquer un signalement comme r√©solu.
3. Le statut du signalement change et est mis √† jour dans la base de donn√©es.

=== En r√©sum√©

* Le formulaire de signalement permet √† un utilisateur de signaler un probl√®me en soumettant des informations essentielles (description, lieu, photo). Il cr√©e un nouvel enregistrement dans le syst√®me.
* La liste des signalements affiche tous les signalements soumis, avec des options pour modifier leur statut (ouvrir ou fermer). Elle permet de suivre l'avancement de chaque signalement et d‚Äôeffectuer des actions pour les r√©soudre.


== Fonctionnalit√©s et Sc√©narios d'Utilisation : Formulaire de Signalement et Liste des Signalements

=== Utilisateurs
1. **Utilisateur standard (Utilisateur connect√©)**  
    - *R√¥le* : Utilisateur r√©gulier, souvent un citoyen ou un membre d‚Äôune communaut√©.  
    - *Autorisation* : Peut cr√©er un signalement, voir les signalements existants, et changer le statut des signalements √† "Ferm√©" (si autoris√©).  

2. **Administrateur**  
    - *R√¥le* : Responsable de la gestion des signalements, de leur traitement et de la supervision.  
    - *Autorisation* : Peut consulter, g√©rer, et modifier tous les signalements (changer leur statut, assigner des actions, etc.), y compris fermer ou rouvrir des signalements si n√©cessaire.  

3. **Responsable du traitement des signalements**  
    - *R√¥le* : Personne charg√©e de r√©soudre les signalements.  
    - *Autorisation* : Peut uniquement voir les signalements ouverts et marquer les signalements comme r√©solus.  

=== Sc√©narios pour la fonctionnalit√© "Formulaire de signalement"

==== Sc√©nario 1 : Utilisateur standard cr√©e un nouveau signalement
- *Action* : L'utilisateur visite le formulaire de signalement.  
- *√âtapes* :  
  1. L'utilisateur remplit la description du probl√®me (par exemple, "D√©chet trouv√© pr√®s du parc").  
  2. Il ajoute des informations suppl√©mentaires comme l'emplacement (adresse ou GPS) et t√©l√©charge une photo du probl√®me.  
  3. L'utilisateur soumet le formulaire.  
- *R√©sultat attendu* :  
  Un nouveau signalement est ajout√© √† la base de donn√©es avec les informations fournies, et un message de confirmation est affich√©. Le signalement appara√Æt dans la liste des signalements.  

==== Sc√©nario 2 : Administrateur cr√©e un signalement au nom d'un autre utilisateur
- *Action* : L'administrateur souhaite cr√©er un signalement pour un utilisateur qui rencontre des probl√®mes pour soumettre un signalement.  
- *√âtapes* :  
  1. L'administrateur acc√®de au formulaire de signalement.  
  2. Il remplit la description, l'emplacement et joint une photo.  
  3. L'administrateur soumet le signalement.  
- *R√©sultat attendu* :  
  Le signalement est ajout√© √† la base de donn√©es et visible dans la liste des signalements. Le signalement est li√© √† l'utilisateur responsable du probl√®me.  

==== Sc√©nario 3 : Utilisateur omet de remplir un champ requis
- *Action* : L'utilisateur essaie de soumettre le formulaire sans remplir un champ obligatoire.  
- *√âtapes* :  
  1. L'utilisateur tente de soumettre le formulaire avec un champ vide (par exemple, sans description).  
  2. Le syst√®me affiche un message d'erreur, comme "La description est obligatoire".  
- *R√©sultat attendu* :  
  L'utilisateur est invit√© √† remplir les champs manquants avant de pouvoir soumettre le formulaire.  

=== Sc√©narios pour la fonctionnalit√© "Liste des signalements"

==== Sc√©nario 1 : Utilisateur standard consulte la liste des signalements
- *Action* : L'utilisateur consulte la liste des signalements pour voir les probl√®mes en cours.  
- *√âtapes* :  
  1. L'utilisateur se connecte √† son compte et acc√®de √† la page des signalements.  
  2. Il voit une liste de signalements avec leurs descriptions, statuts, dates et photos associ√©es.  
- *R√©sultat attendu* :  
  L'utilisateur peut voir tous les signalements ouverts et ferm√©s. Il peut aussi filtrer les signalements par statut (ouvert/ferm√©), type de probl√®me, etc.  

==== Sc√©nario 2 : Utilisateur change le statut d‚Äôun signalement
- *Action* : L'utilisateur clique sur le bouton pour changer le statut d‚Äôun signalement ouvert.  
- *√âtapes* :  
  1. L'utilisateur voit un signalement avec le statut "üîì Ouvert".  
  2. Il clique sur le bouton pour marquer le signalement comme "‚úîÔ∏è Ferm√©".  
  3. Un appel API est effectu√© pour mettre √† jour le statut du signalement dans la base de donn√©es.  
  4. Le signalement est mis √† jour dans l'interface, et le bouton devient "‚úîÔ∏è Ferm√©".  
- *R√©sultat attendu* :  
  Le signalement est maintenant marqu√© comme "r√©solu", et son statut est mis √† jour dans la base de donn√©es.  

==== Sc√©nario 3 : Administrateur ou responsable ferme un signalement
- *Action* : L'administrateur ou responsable marque un signalement comme "r√©solu".  
- *√âtapes* :  
  1. L'administrateur acc√®de √† la liste des signalements.  
  2. Il voit un signalement marqu√© comme "Ouvert" et d√©cide de le fermer.  
  3. Il clique sur le bouton pour le fermer.  
  4. Le statut du signalement passe √† "‚úîÔ∏è Ferm√©".  
  5. Si n√©cessaire, l'administrateur peut ajouter des commentaires ou assigner des actions suppl√©mentaires.  
- *R√©sultat attendu* :  
  Le signalement est mis √† jour dans le syst√®me avec le statut "r√©solu", et le responsable du traitement est notifi√©.  

==== Sc√©nario 4 : Administrateur consulte les signalements ferm√©s et r√©ouvre un signalement
- *Action* : L'administrateur souhaite r√©ouvrir un signalement ferm√©.  
- *√âtapes* :  
  1. L'administrateur filtre les signalements pour afficher uniquement ceux qui sont ferm√©s.  
  2. Il s√©lectionne un signalement ferm√© et le r√©ouvre en cliquant sur "‚úîÔ∏è Ferm√©" pour revenir √† l'√©tat "üîì Ouvert".  
  3. Le statut du signalement est mis √† jour dans la base de donn√©es.  
- *R√©sultat attendu* :  
  Le signalement est r√©ouvert et appara√Æt dans la liste des signalements comme "Ouvert".  

==== Sc√©nario 5 : Utilisateur consulte un signalement sans photo
- *Action* : L'utilisateur consulte un signalement, mais il n‚Äôy a pas de photo associ√©e.  
- *√âtapes* :  
  1. L'utilisateur clique sur un signalement de la liste qui n'a pas de photo.  
  2. Le signalement s'affiche sans la section "Photo".  
- *R√©sultat attendu* :  
  Le signalement est affich√© sans photo, et les autres informations comme la description, l'emplacement et la date sont toujours visibles.  

==== Sc√©nario 6 : Utilisateur consulte un signalement avec une photo
- *Action* : L'utilisateur consulte un signalement qui contient une photo.  
- *√âtapes* :  
  1. L'utilisateur clique sur un signalement dans la liste avec une photo.  
  2. La photo s'affiche correctement sous le texte.  
- *R√©sultat attendu* :  
  Le signalement avec la photo est correctement affich√©, et l'utilisateur peut visualiser l‚Äôimage en plus des autres informations.  

=== R√©sum√© des sc√©narios possibles
- **Utilisateur standard** : Peut cr√©er un signalement, consulter les signalements existants, et mettre √† jour le statut d‚Äôun signalement (si le bouton est interactif pour lui).  
- **Administrateur** : A un contr√¥le total sur tous les signalements : il peut les consulter, les fermer, les r√©ouvrir et attribuer des actions suppl√©mentaires.  
- **Responsable du traitement des signalements** : Peut consulter les signalements ouverts et les marquer comme r√©solus.  
