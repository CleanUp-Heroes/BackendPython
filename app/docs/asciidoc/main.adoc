= Backend APP

== CleanUp Heroes
Adjedomole, Barry, Rahim

== Description de l'application
Ce site a pour ambition de sensibiliser les citoyens au tri sélectif et au respect de l’environnement tout en les encourageant à agir activement pour améliorer leur cadre de vie. Les utilisateurs peuvent participer à des **challenges environnementaux** qui leur permettent de gagner des points en réalisant des actions concrètes, telles que le tri des déchets ou la participation à des initiatives locales. Ces points accumulés pourront, à l’avenir, être échangés contre des récompenses concrètes, renforçant ainsi leur motivation à s’impliquer durablement.

En parallèle, le site offre une fonctionnalité clé : le **signalement de déchets abandonnés** dans les espaces publics. Ces signalements sont actuellement affichés sous forme de liste, mais une évolution future prévoit l’intégration d’une carte interactive. Chaque signalement sera représenté par un marqueur géolocalisé, offrant une vue claire des zones concernées. Une fois un déchet ramassé, son marqueur pourra être retiré de la carte pour refléter la propreté retrouvée de l’espace. Cette fonctionnalité vise à améliorer la coordination entre citoyens et services responsables, tout en fournissant un outil visuel pour mesurer les progrès réalisés.

Le site mettra également en avant des **classements mondiaux et locaux**, permettant aux utilisateurs de comparer leurs contributions avec celles des autres. Ces classements encourageront une saine compétition et renforceront le sentiment de communauté autour de la cause environnementale.

== Objectif de l'application
L’objectif global de ce projet est de promouvoir des comportements responsables, tels que le tri sélectif et la collecte des déchets, tout en récompensant l’engagement des utilisateurs. En combinant des éléments ludiques comme les challenges et les classements, des outils pratiques comme la carte interactive, et des perspectives d’avenir avec des récompenses concrètes, ce site ambitionne de devenir une plateforme incontournable pour tous ceux qui souhaitent agir pour l’environnement.

== Tableau comparatif des solutions existantes

[cols="1,2,2", options="header"]
|===
| **Solution**   | **Avantages** | **Limites**
| **Litterati**   | - Encourage un nettoyage collaboratif.+
- Implique activement les utilisateurs dans la géolocalisation des déchets. | - Dépend de l’implication des utilisateurs.+
- Difficulté à s’étendre dans les zones rurales.
| **Recyclebank** | - Récompenses attractives (réductions locales). +
- Incite au recyclage continu. | - Limité aux zones partenaires. +
- Offre de récompenses restreinte.
| **TrashOut**    | - Permet de signaler et cartographier les déchets. +
- Facilite une gestion collective. | - Dépend des signalements des utilisateurs (informations parfois inexactes). +
- Système décentralisé.
| **Tidy Towns**  | - Encourage la participation communautaire par des récompenses. +
- Focalisé sur l’embellissement des villes. | - Nécessite une bonne organisation d’événements. +
- Implique fortement les communautés locales.
| **EcoHero**     | - Dimension ludique avec des défis et récompenses. +
- Encourage des comportements durables. | - Manque d’adaptation aux spécificités locales. +
- Nécessite un engagement constant des utilisateurs.
|===

== Avantages supplémentaires de **CleanUp Heroes**

**CleanUp Heroes** apporte des innovations et fonctionnalités supplémentaires par rapport aux solutions existantes :

. **Fonctionnalités intégrées et complémentaires** :
   * **Signalements cartographiés** : Les utilisateurs peuvent signaler des déchets géolocalisés via une carte interactive, qui évolue en temps réel. Les signalements peuvent être retirés une fois les déchets ramassés.
   * **Classements dynamiques** : Un classement mondial et local permet de motiver les utilisateurs en favorisant une saine compétition.
   * **Récompenses concrètes** : Les utilisateurs peuvent gagner des avantages auprès de commerçants locaux en atteignant des objectifs spécifiques, renforçant leur motivation.

. **Impact visible et mesurable** :
   L'application propose une estimation chiffrée de l’impact positif des actions des utilisateurs (par exemple, quantité de déchets collectés, CO2 économisé), renforçant leur sentiment d'accomplissement et d’utilité.

. **Engagement communautaire renforcé** :
   En liant les défis individuels et communautaires, l'application crée une synergie entre citoyens, entreprises locales et collectivités, encourageant une participation active à grande échelle.

. **Conception ludique et motivante** :
   Grâce à l'intégration d'éléments ludiques comme les défis et les récompenses, CleanUp Heroes s’assure de maintenir un haut niveau d’engagement des utilisateurs.


== Architecture de l'application

image::images/architecture_projet.png[architecture de l'application, width=500, align=center]

== Features

== Feature 2

== Formulaire de signalement

=== Objectif
Le formulaire de signalement permet à un utilisateur de signaler un problème ou une situation nécessitant une intervention. Ce formulaire collectera les informations essentielles liées au signalement et permettra de créer une nouvelle entrée dans le système.

=== Comportement

==== Collecte des données
Le formulaire demande à l'utilisateur de remplir plusieurs champs :

* *Description du problème* : Un champ texte où l'utilisateur peut décrire le problème rencontré.
* *Lieu* : Où se trouve le problème (par exemple, une adresse ou des coordonnées géographiques).
* *Photo (facultatif)* : L'utilisateur peut ajouter une photo pour illustrer le problème.
* *Type de problème* : Sélectionner un type de problème parmi une liste prédéfinie (par exemple, déchet, panne, etc.).
* *Date/Heure* : La date et l'heure du signalement sont automatiquement ajoutées pour chaque nouvelle entrée.

==== Validation et envoi

* Une fois les informations remplies, l'utilisateur peut soumettre le formulaire.
* Les données sont envoyées à un backend via une requête API pour être enregistrées dans une base de données.

=== Fonctionnement détaillé du formulaire

* Lors de la soumission du formulaire, une requête POST est envoyée au backend pour créer un nouveau signalement avec les données saisies.
* Si l'utilisateur a omis un champ requis ou fait une erreur, des messages d'erreur ou des validations peuvent être affichés.
* Après une soumission réussie, l'utilisateur peut être redirigé vers la liste des signalements ou voir un message de confirmation.

=== Exemple d'interaction avec le formulaire

1. L'utilisateur remplit le formulaire avec la description du problème et le lieu.
2. Il peut également joindre une photo.
3. Une fois le formulaire soumis, le signalement est ajouté à la base de données et l'utilisateur reçoit un message de confirmation.

== Liste des signalements

=== Objectif
La liste des signalements affiche toutes les demandes ou problèmes signalés par les utilisateurs. Elle permet de suivre l'état de chaque signalement et d’effectuer des actions dessus, comme marquer un signalement comme "résolu" ou "en cours".

=== Comportement

==== Affichage des signalements

* Une liste de signalements est récupérée depuis le backend (via une requête GET).
* Chaque signalement affichera des informations essentielles, telles que :
  ** La description du problème
  ** Le statut (ouvert ou fermé)
  ** La date du signalement
  ** Le type de problème
  ** Une photo (si disponible)

==== Statut du signalement

* Chaque signalement peut avoir un statut qui indique s'il a été traité ou non :
  ** *Ouvert* : Le signalement n’a pas encore été résolu.
  ** *Fermé* : Le signalement a été résolu ou pris en charge.
* Un bouton est affiché à côté de chaque signalement pour permettre à l'utilisateur de changer son statut (de "ouvert" à "fermé").

==== Actions disponibles

* Un utilisateur peut interagir avec chaque signalement en cliquant sur un bouton pour mettre à jour son statut (fermer le signalement si celui-ci est traité).
* Cette action envoie une requête API PUT pour modifier le statut du signalement dans la base de données.

==== Filtrage et tri des signalements

* Les signalements peuvent être filtrés par statut, type de problème, ou date.
* L’utilisateur peut aussi trier les signalements en fonction de différents critères (par exemple, par date, par type, etc.).

=== Fonctionnement détaillé de la liste des signalements

* Lors de la connexion de l'utilisateur ou de la page de gestion des signalements, une requête GET est envoyée au backend pour récupérer tous les signalements.
* Chaque signalement est affiché sous forme de carte ou de ligne dans un tableau, avec un bouton pour changer son statut.
* Lorsqu’un utilisateur modifie un signalement (en le marquant comme "fermé"), une requête PUT est envoyée pour mettre à jour l'état du signalement dans la base de données.
* Une fois le statut modifié, l'interface se met à jour pour refléter cette modification.

=== Exemple d'interaction avec la liste des signalements

1. L'utilisateur voit la liste des signalements avec un bouton "Fermer" à côté de chaque signalement ouvert.
2. Il clique sur le bouton "Fermer" pour marquer un signalement comme résolu.
3. Le statut du signalement change et est mis à jour dans la base de données.

=== En résumé

* Le formulaire de signalement permet à un utilisateur de signaler un problème en soumettant des informations essentielles (description, lieu, photo). Il crée un nouvel enregistrement dans le système.
* La liste des signalements affiche tous les signalements soumis, avec des options pour modifier leur statut (ouvrir ou fermer). Elle permet de suivre l'avancement de chaque signalement et d’effectuer des actions pour les résoudre.


== Fonctionnalités et Scénarios d'Utilisation : Formulaire de Signalement et Liste des Signalements

=== Utilisateurs
1. **Utilisateur standard (Utilisateur connecté)**  
    - *Rôle* : Utilisateur régulier, souvent un citoyen ou un membre d’une communauté.  
    - *Autorisation* : Peut créer un signalement, voir les signalements existants, et changer le statut des signalements à "Fermé" (si autorisé).  

2. **Administrateur**  
    - *Rôle* : Responsable de la gestion des signalements, de leur traitement et de la supervision.  
    - *Autorisation* : Peut consulter, gérer, et modifier tous les signalements (changer leur statut, assigner des actions, etc.), y compris fermer ou rouvrir des signalements si nécessaire.  

3. **Responsable du traitement des signalements**  
    - *Rôle* : Personne chargée de résoudre les signalements.  
    - *Autorisation* : Peut uniquement voir les signalements ouverts et marquer les signalements comme résolus.  

=== Scénarios pour la fonctionnalité "Formulaire de signalement"

==== Scénario 1 : Utilisateur standard crée un nouveau signalement
- *Action* : L'utilisateur visite le formulaire de signalement.  
- *Étapes* :  
  1. L'utilisateur remplit la description du problème (par exemple, "Déchet trouvé près du parc").  
  2. Il ajoute des informations supplémentaires comme l'emplacement (adresse ou GPS) et télécharge une photo du problème.  
  3. L'utilisateur soumet le formulaire.  
- *Résultat attendu* :  
  Un nouveau signalement est ajouté à la base de données avec les informations fournies, et un message de confirmation est affiché. Le signalement apparaît dans la liste des signalements.  

==== Scénario 2 : Administrateur crée un signalement au nom d'un autre utilisateur
- *Action* : L'administrateur souhaite créer un signalement pour un utilisateur qui rencontre des problèmes pour soumettre un signalement.  
- *Étapes* :  
  1. L'administrateur accède au formulaire de signalement.  
  2. Il remplit la description, l'emplacement et joint une photo.  
  3. L'administrateur soumet le signalement.  
- *Résultat attendu* :  
  Le signalement est ajouté à la base de données et visible dans la liste des signalements. Le signalement est lié à l'utilisateur responsable du problème.  

==== Scénario 3 : Utilisateur omet de remplir un champ requis
- *Action* : L'utilisateur essaie de soumettre le formulaire sans remplir un champ obligatoire.  
- *Étapes* :  
  1. L'utilisateur tente de soumettre le formulaire avec un champ vide (par exemple, sans description).  
  2. Le système affiche un message d'erreur, comme "La description est obligatoire".  
- *Résultat attendu* :  
  L'utilisateur est invité à remplir les champs manquants avant de pouvoir soumettre le formulaire.  

=== Scénarios pour la fonctionnalité "Liste des signalements"

==== Scénario 1 : Utilisateur standard consulte la liste des signalements
- *Action* : L'utilisateur consulte la liste des signalements pour voir les problèmes en cours.  
- *Étapes* :  
  1. L'utilisateur se connecte à son compte et accède à la page des signalements.  
  2. Il voit une liste de signalements avec leurs descriptions, statuts, dates et photos associées.  
- *Résultat attendu* :  
  L'utilisateur peut voir tous les signalements ouverts et fermés. Il peut aussi filtrer les signalements par statut (ouvert/fermé), type de problème, etc.  

==== Scénario 2 : Utilisateur change le statut d’un signalement
- *Action* : L'utilisateur clique sur le bouton pour changer le statut d’un signalement ouvert.  
- *Étapes* :  
  1. L'utilisateur voit un signalement avec le statut "🔓 Ouvert".  
  2. Il clique sur le bouton pour marquer le signalement comme "✔️ Fermé".  
  3. Un appel API est effectué pour mettre à jour le statut du signalement dans la base de données.  
  4. Le signalement est mis à jour dans l'interface, et le bouton devient "✔️ Fermé".  
- *Résultat attendu* :  
  Le signalement est maintenant marqué comme "résolu", et son statut est mis à jour dans la base de données.  

==== Scénario 3 : Administrateur ou responsable ferme un signalement
- *Action* : L'administrateur ou responsable marque un signalement comme "résolu".  
- *Étapes* :  
  1. L'administrateur accède à la liste des signalements.  
  2. Il voit un signalement marqué comme "Ouvert" et décide de le fermer.  
  3. Il clique sur le bouton pour le fermer.  
  4. Le statut du signalement passe à "✔️ Fermé".  
  5. Si nécessaire, l'administrateur peut ajouter des commentaires ou assigner des actions supplémentaires.  
- *Résultat attendu* :  
  Le signalement est mis à jour dans le système avec le statut "résolu", et le responsable du traitement est notifié.  

==== Scénario 4 : Administrateur consulte les signalements fermés et réouvre un signalement
- *Action* : L'administrateur souhaite réouvrir un signalement fermé.  
- *Étapes* :  
  1. L'administrateur filtre les signalements pour afficher uniquement ceux qui sont fermés.  
  2. Il sélectionne un signalement fermé et le réouvre en cliquant sur "✔️ Fermé" pour revenir à l'état "🔓 Ouvert".  
  3. Le statut du signalement est mis à jour dans la base de données.  
- *Résultat attendu* :  
  Le signalement est réouvert et apparaît dans la liste des signalements comme "Ouvert".  

==== Scénario 5 : Utilisateur consulte un signalement sans photo
- *Action* : L'utilisateur consulte un signalement, mais il n’y a pas de photo associée.  
- *Étapes* :  
  1. L'utilisateur clique sur un signalement de la liste qui n'a pas de photo.  
  2. Le signalement s'affiche sans la section "Photo".  
- *Résultat attendu* :  
  Le signalement est affiché sans photo, et les autres informations comme la description, l'emplacement et la date sont toujours visibles.  

==== Scénario 6 : Utilisateur consulte un signalement avec une photo
- *Action* : L'utilisateur consulte un signalement qui contient une photo.  
- *Étapes* :  
  1. L'utilisateur clique sur un signalement dans la liste avec une photo.  
  2. La photo s'affiche correctement sous le texte.  
- *Résultat attendu* :  
  Le signalement avec la photo est correctement affiché, et l'utilisateur peut visualiser l’image en plus des autres informations.  

=== Résumé des scénarios possibles
- **Utilisateur standard** : Peut créer un signalement, consulter les signalements existants, et mettre à jour le statut d’un signalement (si le bouton est interactif pour lui).  
- **Administrateur** : A un contrôle total sur tous les signalements : il peut les consulter, les fermer, les réouvrir et attribuer des actions supplémentaires.  
- **Responsable du traitement des signalements** : Peut consulter les signalements ouverts et les marquer comme résolus.  
